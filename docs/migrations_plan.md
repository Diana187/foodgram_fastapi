# migrations_plan.md

## Цель
Описать стратегию миграций Alembic и начального наполнения БД (seeds) для FastAPI-версии Foodgram.

## База
- БД: PostgreSQL (UTC, TIMESTAMPTZ).
- ORM: SQLAlchemy 2.0 (async).
- Мигратор: Alembic.

## Принципы
1) **Мелкие ревизии, явные названия.** Один логический шаг = одна миграция.
2) **Порядок по FK.** Сначала «родители», потом «дочерние» таблицы.
3) **Идёмпотентность.** Сиды и DDL по возможности безопасны к повторному запуску.
4) **Серверные даты.** `created` → `server_default=now()`, `updated` → обновляется приложением или триггером.
5) **Ограничения видны в схеме.** Unique/Check/Index создаём в миграциях, а не «по умолчанию в коде».

## Инициализация Alembic
```bash
alembic init -t async alembic
