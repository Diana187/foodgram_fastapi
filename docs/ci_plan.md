# ci_plan.md

## Цель
Наметить общий план автоматических проверок (CI) для проекта Foodgram→FastAPI без технических деталей.
Задача — зафиксировать, **что** должно проверяться при каждом коммите и pull request.

---

## Основные этапы CI
1. **Установка окружения** — установка Python и зависимостей проекта.
2. **Проверка кода** — запуск линтеров (Ruff, Black), проверка типов (MyPy).
3. **Тестирование** — выполнение Pytest для всех модулей.
4. **Миграции** — проверка, что Alembic миграции созданы и применяются без ошибок.
5. **Сборка Docker-образа** — убедиться, что проект собирается и запускается.
6. **Документация** — контроль, что OpenAPI схема и документация актуальны.

---

## Когда запускается
- При каждом `push` в ветки `main` и `develop`.
- При каждом `pull request` в `main`.

---

## Что считается успешным билдом
- Код отформатирован, без предупреждений линтера.
- Типы корректны (MyPy не выдаёт ошибок).
- Все тесты проходят.
- Миграции применяются успешно.
- Docker-образ собирается без ошибок.

---

## Минимальные требования к PR
- Все проверки CI зелёные.
- Изменения сопровождаются обновлёнными тестами и миграциями.
- При необходимости — обновлены документы (`models_mapping.md`, `api_contract.md`).

---

## Планы на следующие итерации
- Добавить деплой на staging-сервер.
- Настроить отчёт о покрытии тестов.
- Добавить уведомления в Telegram/GitHub о результатах CI.
